<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <title>Bab-Ä± AlÃ¢ KÃ¼nefe | QR MenÃ¼</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
        :root {
            --bg: #050806;
            --bg-soft: #0b100b;
            --card: #10130f;
            --accent-green: #08c737;
            --accent-gold: #f4c86a;
            --accent-soft: rgba(8, 199, 55, 0.16);
            --text: #fdfdf8;
            --muted: #b7c0b5;
            --radius-lg: 24px;
            --radius-md: 16px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background: radial-gradient(circle at top, #141b11 0, var(--bg) 55%);
            color: var(--text);
            display: flex;
            justify-content: center;
            min-height: 100vh;
            scrollbar-width: thin;
            scrollbar-color: var(--accent-green) #050806;
        }

        .app {
            width: 100%;
            max-width: 768px;
            padding: 10px 10px 80px;
        }

        .app-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 4px 4px 10px;
            position: sticky;
            top: 0;
            z-index: 50;
            background: radial-gradient(circle at top, #141b11 0, rgba(5, 8, 6, 0.95) 60%);
            backdrop-filter: blur(8px);
        }

        .brand { display: flex; align-items: center; gap: 10px; }
        .brand-logo { height: 32px; }
        .brand-text { display: flex; flex-direction: column; }
        .brand-text span:first-child { font-size: 14px; font-weight: 600; }
        .brand-text span:last-child { font-size: 11px; color: var(--muted); }

        .tag {
            font-size: 11px;
            padding: 4px 10px;
            border-radius: 999px;
            background: rgba(244, 200, 106, 0.12);
            color: var(--accent-gold);
            border: 1px solid rgba(244, 200, 106, 0.4);
        }

        .hero {
            position: relative;
            border-radius: var(--radius-lg);
            overflow: hidden;
            background: #000;
            /* Katmerâ€™deki gibi sabit oran */
            aspect-ratio: 4 / 3;
            box-shadow: 0 18px 50px rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.05);
            margin-bottom: 14px;
        }

        .hero img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            transition: opacity .25s ease, transform .4s ease;
        }

        .hero-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent 45%);
        }

        .hero-content {
            position: absolute;
            inset: auto 16px 16px 16px;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            gap: 10px;
        }

        .hero-title { font-size: 20px; font-weight: 700; letter-spacing: 0.03em; }
        .hero-sub { font-size: 11px; color: #e3e7dd; margin-top: 3px; }

        .hero-badge {
            background: rgba(0,0,0,0.78);
            border-radius: 999px;
            padding: 7px 11px;
            font-size: 11px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            border: 1px solid rgba(244, 200, 106, 0.35);
        }
        .hero-badge span:first-child { color: var(--muted); }
        .hero-badge span:last-child { font-weight: 600; color: var(--accent-gold); }

        .tabs-wrapper { margin-bottom: 10px; }
        .tabs-label {
            font-size: 11px;
            color: var(--muted);
            margin: 2px 2px 6px;
            letter-spacing: .08em;
            text-transform: uppercase;
        }

        .tabs-row { display: flex; align-items: center; gap: 6px; }

        .product-tabs {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 4px;
            scroll-behavior: smooth;
            scrollbar-width: none;
            -ms-overflow-style: none;
            flex: 1;
        }
        .product-tabs::-webkit-scrollbar { display: none; }

        .product-tab {
            flex: 0 0 auto;
            border-radius: 999px;
            padding: 7px 11px;
            font-size: 11px;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.06);
            color: var(--muted);
            display: flex;
            flex-direction: column;
            gap: 2px;
            cursor: pointer;
            min-width: 110px;
        }
        .product-tab .title {
            font-size: 11px;
            font-weight: 500;
            color: #f4f5ef;
            white-space: nowrap;
        }
        .product-tab .meta {
            font-size: 10px;
            opacity: .7;
            white-space: nowrap;
        }
        .product-tab.active {
            background: var(--accent-soft);
            border-color: var(--accent-green);
            color: var(--text);
        }
        .product-tab.active .title { color: #ffffff; }

        .tabs-arrow {
            flex: 0 0 auto;
            width: 28px;
            height: 28px;
            border-radius: 999px;
            border: 1px solid rgba(8, 199, 55, 0.8);
            background: linear-gradient(135deg, var(--accent-green), var(--accent-gold));
            color: #141205;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 0 8px rgba(0,0,0,0.7);
        }
        .tabs-arrow:active { transform: scale(0.95); }

        .category-label {
            font-size: 11px;
            color: var(--muted);
            margin-bottom: 6px;
            letter-spacing: .08em;
            text-transform: uppercase;
        }

        .card {
            background: var(--card);
            border-radius: var(--radius-md);
            padding: 14px 14px 10px;
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.55);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .card.slide-in { animation: slideInRight .25s ease-out; }
        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(40px); }
            to   { opacity: 1; transform: translateX(0); }
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            margin-bottom: 6px;
        }
        .card-title { font-size: 19px; font-weight: 600; }
        .card-tagline { font-size: 11px; color: var(--muted); margin-top: 3px; }

        .gram-badge {
            font-size: 10px;
            border-radius: 999px;
            padding: 4px 8px;
            background: rgba(8, 199, 55, 0.08);
            color: var(--accent-green);
            align-self: flex-start;
            border: 1px solid rgba(8, 199, 55, 0.35);
        }

        .card-desc { font-size: 12px; color: var(--muted); margin: 6px 0 8px; }

        .price-list {
            border-radius: 12px;
            background: var(--bg-soft);
            overflow: hidden;
        }
        .price-row {
            display: flex;
            justify-content: space-between;
            padding: 7px 10px;
            font-size: 13px;
        }
        .price-row:nth-child(odd) { background: rgba(255, 255, 255, 0.02); }
        .price-row span:first-child { color: #f1f2ea; }
        .price-row span:last-child { color: var(--accent-gold); font-weight: 600; }

        .note { font-size: 10px; color: var(--muted); margin-top: 6px; }

        .bottom-bar {
            position: fixed;
            left: 50%;
            transform: translateX(-50%);
            bottom: 10px;
            width: 100%;
            max-width: 768px;
            padding: 0 10px;
            z-index: 30;
        }

        .bottom-actions {
            background: rgba(5, 7, 4, 0.98);
            border-radius: 999px;
            padding: 6px 8px;
            display: flex;
            gap: 6px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.85);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .action-btn {
            flex: 1;
            border-radius: 999px;
            border: none;
            padding: 8px 10px;
            font-size: 13px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            cursor: pointer;
        }
        .action-btn.primary {
            background: linear-gradient(135deg, var(--accent-green), var(--accent-gold));
            color: #141205;
            font-weight: 600;
        }
        .action-btn.ghost { background: transparent; color: var(--text); }

        body::-webkit-scrollbar { width: 6px; }
        body::-webkit-scrollbar-track { background: #050806; }
        body::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--accent-green), var(--accent-gold));
            border-radius: 999px;
        }

        @media (min-width: 600px) {
            .app { padding: 16px 16px 90px; }
            .hero-title { font-size: 22px; }
            .card-desc, .price-row { font-size: 14px; }
        }
    </style>
</head>
<body>

<div class="app">
    <header class="app-header">
        <div class="brand">
            <img class="brand-logo"
                 src="https://www.babialakunefe.com/03_images/logo.png"
                 alt="Bab-Ä± AlÃ¢ KÃ¼nefe logosu" />
            <div class="brand-text">
                <span>Bab-Ä± AlÃ¢ KÃ¼nefe</span>
                <span>KÃ¼nefenin ustasÄ±ndan</span>
            </div>
        </div>
        <div class="tag">QR MenÃ¼</div>
    </header>

    <section class="hero" id="heroArea">
        <img id="heroImage" src="" alt="" />
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <div>
                <div id="heroTitle" class="hero-title"></div>
                <div id="heroSub" class="hero-sub"></div>
            </div>
            <div class="hero-badge">
                <span id="heroBadgeLabel">BaÅŸlangÄ±Ã§ fiyatÄ±</span>
                <span id="heroPrice"></span>
            </div>
        </div>
    </section>

    <section class="tabs-wrapper">
        <div class="tabs-label">ÃœrÃ¼n seÃ§in</div>
        <div class="tabs-row">
            <button id="tabPrev" class="tabs-arrow" type="button">â€¹</button>
            <div id="productTabs" class="product-tabs"></div>
            <button id="tabNext" class="tabs-arrow" type="button">â€º</button>
        </div>
    </section>

    <div id="categoryLabel" class="category-label"></div>

    <section class="content" id="contentArea">
        <div id="mainCard" class="card">
            <div class="card-header">
                <div>
                    <div id="cardTitle" class="card-title"></div>
                    <div id="cardTagline" class="card-tagline"></div>
                </div>
                <div id="cardBadge" class="gram-badge"></div>
            </div>
            <p id="cardDesc" class="card-desc"></p>
            <div id="priceList" class="price-list"></div>
            <div id="cardNote" class="note"></div>
        </div>
    </section>
</div>

<div class="bottom-bar">
    <div class="bottom-actions">
        <button class="action-btn primary" onclick="window.location.href='tel:+90XXXXXXXXXX'">
            <span class="icon">ðŸ“ž</span>
            <span>Garsonu Ã§aÄŸÄ±r</span>
        </button>
        <button class="action-btn ghost" onclick="shareLocation()">
            <span class="icon">ðŸ“¤</span>
            <span>Konum PaylaÅŸ</span>
        </button>
    </div>
</div>

<script src="products.js"></script>
<script>
    const LOCATION_URL = "https://share.google/cQ9xoIpl0kTkMQcEi";

    function shareLocation() {
        if (navigator.share) {
            navigator.share({
                title: "Bab-Ä± AlÃ¢ KÃ¼nefe Konumu",
                text: "Bab-Ä± AlÃ¢ KÃ¼nefe konumunu paylaÅŸÄ±yorum.",
                url: LOCATION_URL
            }).catch(() => {});
        } else {
            window.location.href = LOCATION_URL;
        }
    }

    let currentIndex = 0;

    // ðŸ”¥ SIRALAMA BURADA: products iÃ§indeki order alanÄ±na gÃ¶re
    const orderedKeys = Object.keys(products).sort((a, b) => {
        const oa = products[a].order ?? 9999;
        const ob = products[b].order ?? 9999;
        return oa - ob;
    });

    function renderProduct(key) {
        const p = products[key];
        if (!p) return;

        const heroImage     = document.getElementById("heroImage");
        const heroTitle     = document.getElementById("heroTitle");
        const heroSub       = document.getElementById("heroSub");
        const heroPrice     = document.getElementById("heroPrice");
        const categoryLabel = document.getElementById("categoryLabel");

        const card        = document.getElementById("mainCard");
        const cardTitle   = document.getElementById("cardTitle");
        const cardTagline = document.getElementById("cardTagline");
        const cardBadge   = document.getElementById("cardBadge");
        const cardDesc    = document.getElementById("cardDesc");
        const cardNote    = document.getElementById("cardNote");
        const priceList   = document.getElementById("priceList");

        heroImage.style.opacity = "0";
        setTimeout(() => {
            heroImage.src = p.image;
            heroImage.alt = p.title;

            const pos   = p.imagePosition || "center center";
            const scale = p.imageScale    || 1;

            heroImage.style.objectPosition = pos;
            heroImage.style.transform      = `scale(${scale})`;

            heroImage.style.opacity = "1";
        }, 80);

        heroTitle.textContent     = p.title;
        heroSub.textContent       = p.subtitle || "";
        categoryLabel.textContent = p.category || "";

        cardTitle.textContent   = p.title;
        cardTagline.textContent = p.tagline || "";
        cardBadge.textContent   = p.badge || "";
        cardDesc.textContent    = p.desc || "";
        cardNote.textContent    = p.note || "";

        priceList.innerHTML = "";
        (p.prices || []).forEach(row => {
            const div = document.createElement("div");
            div.className = "price-row";
            div.innerHTML = `<span>${row.label}</span><span>${row.price}</span>`;
            priceList.appendChild(div);
        });

        heroPrice.textContent =
            (p.prices && p.prices.length > 0) ? p.prices[0].price : "";

        document.title = `${p.title} | Bab-Ä± AlÃ¢ KÃ¼nefe`;

        card.classList.remove("slide-in");
        void card.offsetWidth;
        card.classList.add("slide-in");
    }

    function buildTabs() {
        const container   = document.getElementById("productTabs");
        const prevBtn     = document.getElementById("tabPrev");
        const nextBtn     = document.getElementById("tabNext");
        const heroArea    = document.getElementById("heroArea");
        const contentArea = document.getElementById("contentArea");

        container.innerHTML = "";
        const padding = 8;

        orderedKeys.forEach((key, index) => {
            const p = products[key];
            if (!p) return;

            const btn = document.createElement("button");
            btn.type = "button";
            btn.className = "product-tab";
            btn.dataset.index = index;
            btn.innerHTML = `
                <span class="title">${p.title}</span>
                <span class="meta">${p.category}</span>
            `;

            btn.addEventListener("click", () => {
                const idx    = parseInt(btn.dataset.index, 10);
                const isLast = idx === orderedKeys.length - 1;
                const same   = idx === currentIndex;

                if (isLast && same) {
                    setActiveByIndex(0);
                } else {
                    setActiveByIndex(idx);
                }
            });

            container.appendChild(btn);
        });

        const tabsNodeList = () => container.querySelectorAll(".product-tab");

        function scrollActiveTab(behavior = "smooth") {
            const tabs = tabsNodeList();
            const activeTab = tabs[currentIndex];
            if (!activeTab) return;

            const maxScroll = container.scrollWidth - container.clientWidth;
            let newScroll;

            if (currentIndex === 0) {
                newScroll = 0;
            } else {
                const containerRect = container.getBoundingClientRect();
                const tabRect       = activeTab.getBoundingClientRect();
                const offsetInView  = tabRect.left - containerRect.left;

                newScroll = container.scrollLeft + offsetInView - padding;
            }

            if (newScroll < 0) newScroll = 0;
            if (newScroll > maxScroll) newScroll = maxScroll;

            container.scrollTo({ left: newScroll, behavior });
        }

        function setActiveByIndex(index, behavior = "smooth") {
            const tabs  = tabsNodeList();
            const count = tabs.length;
            if (count === 0) return;

            currentIndex = ((index % count) + count) % count;

            tabs.forEach(t => t.classList.remove("active"));
            const activeTab = tabs[currentIndex];
            if (activeTab) {
                activeTab.classList.add("active");
            }

            const key = orderedKeys[currentIndex];
            renderProduct(key);
            scrollActiveTab(behavior);
        }

        prevBtn.onclick = () => setActiveByIndex(currentIndex - 1);
        nextBtn.onclick = () => setActiveByIndex(currentIndex + 1);

        let touchStartX = 0;
        let touchStartY = 0;
        let touchActive = false;

        function onTouchStart(e) {
            if (!e.touches || e.touches.length === 0) return;
            touchActive = true;
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
        }

        function onTouchEnd(e) {
            if (!touchActive) return;
            touchActive = false;
            if (!e.changedTouches || e.changedTouches.length === 0) return;

            const endX = e.changedTouches[0].clientX;
            const endY = e.changedTouches[0].clientY;
            const dx   = endX - touchStartX;
            const dy   = endY - touchStartY;

            if (Math.abs(dx) > 40 && Math.abs(dx) > Math.abs(dy)) {
                if (dx < 0) {
                    setActiveByIndex(currentIndex + 1);
                } else {
                    setActiveByIndex(currentIndex - 1);
                }
            }
        }

        [heroArea, contentArea].forEach(el => {
            el.addEventListener("touchstart", onTouchStart, { passive: true });
            el.addEventListener("touchend", onTouchEnd, { passive: true });
        });

        setActiveByIndex(0, "auto");
    }

    buildTabs();
</script>
</body>
</html>
